<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - Les Cadeaux de Nico</title>
    <!-- Favicon standard -->
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/apple-touch-icon.png">
    <meta name="msapplication-TileImage" content="assets/img/apple-touch-icon.png">
    <meta name="msapplication-TileColor" content="#E26155">
     
    <!-- Bootstrap et CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Header dynamique -->
    <div id="header-container"></div>
    
    <!-- BANDE 1 : Formulaire + Infos c√¥te √† c√¥te -->
    <section class="contact-form-band section-light">
        <div class="container py-5">
            <div class="row justify-content-center">
                <!-- Formulaire (gauche/large) -->
                <div class="col-lg-8">
                    <div class="text-center mb-5">
                        <i class="fas fa-paper-plane fa-3x text-accent mb-3"></i>
                        <h2 class="fw-bold mb-3">Envoyez-nous un message</h2>
                        <p class="lead text-secondary mb-5">
                            Votre projet personnalis√© commence ici ! Parlez-nous de vos id√©es,
                            de vos envies et de vos d√©lais. Nous cr√©ons ensemble des cadeaux uniques.
                        </p>
                    </div>
                   
                    <!-- Message de succ√®s (cach√© par d√©faut) -->
                    <div id="success-message" class="alert alert-success d-none" role="alert">
                        <i class="fas fa-check-circle me-2"></i>
                        <strong>Message envoy√© avec succ√®s !</strong> Nous vous r√©pondrons sous 48h maximum. 
                        Vous allez recevoir un email de confirmation.
                    </div>
                    
                    <!-- Message d'erreur (cach√© par d√©faut) -->
                    <div id="error-message" class="alert alert-danger d-none" role="alert">
                        <i class="fas fa-exclamation-circle me-2"></i>
                        <strong>Erreur !</strong> Une erreur s'est produite. Veuillez r√©essayer ou nous contacter directement par email.
                    </div>
                   
                    <form id="contact-form" class="row g-3 needs-validation" novalidate>
                        <!-- üîë IMPORTANT : Remplacez par votre cl√© Web3Forms -->
                        <input type="hidden" name="access_key" value="83e02c35-4197-4d2c-9e70-9d4ebc216185">
                        
                        <!-- Protection anti-spam : champ honeypot (cach√©) -->
                        <input type="checkbox" name="botcheck" class="d-none">
                        
                        <!-- Configuration des emails -->
                        <input type="hidden" name="redirect" value="false">
                        <input type="hidden" name="subject" value="Nouveau message depuis Les Cadeaux de Nico">
                        <input type="hidden" name="from_name" value="Les Cadeaux de Nico">
                        
                        <!-- ‚úÖ Email de confirmation automatique activ√© -->
                        <input type="hidden" name="autoresponse" value="true">
                        
                        <!-- ‚úÖ Template HTML pour les emails -->
                        <input type="hidden" name="template" value="true">
                        
                        <!-- Message de confirmation personnalis√© (cach√©) -->
                        <textarea name="autoresponse_message" class="d-none">Bonjour,

Merci pour votre message ! Nous l'avons bien re√ßu et nous reviendrons vers vous sous 48h maximum.

Votre demande est importante pour nous et notre √©quipe analyse d√®s maintenant votre projet pour vous proposer la meilleure solution personnalis√©e.

üìß Vous pouvez √©galement nous joindre directement √† : contact@lescadeauxdenico.fr

√Ä tr√®s bient√¥t,
L'√©quipe Les Cadeaux de Nico
üéÅ Des cadeaux uniques, faits avec passion</textarea>
                        
                        <div class="col-md-6">
                            <label for="name" class="form-label">Nom complet <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="name" name="name" required
                                   placeholder="Votre nom et pr√©nom">
                            <div class="invalid-feedback">
                                Le nom est requis.
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="email" name="email" required
                                   placeholder="votre@email.com">
                            <div class="invalid-feedback">
                                Veuillez entrer une adresse email valide.
                            </div>
                        </div>
                        
                        <div class="col-12">
                            <label for="phone" class="form-label">T√©l√©phone (optionnel)</label>
                            <input type="tel" class="form-control" id="phone" name="phone"
                                   placeholder="06 XX XX XX XX">
                        </div>
                        
                        <div class="col-12">
                            <label for="subject-select" class="form-label">Sujet <span class="text-danger">*</span></label>
                            <select class="form-select" id="subject-select" name="sujet" required>
                                <option value="">Choisissez un sujet</option>
                                <option value="Demande de devis">Demande de devis</option>
                                <option value="Personnalisation produit">Personnalisation produit</option>
                                <option value="Suivi de commande">Suivi de commande</option>
                                <option value="Partenariat / B2B">Partenariat / B2B</option>
                                <option value="Autre">Autre</option>
                            </select>
                            <div class="invalid-feedback">
                                Veuillez s√©lectionner un sujet.
                            </div>
                        </div>
                        
                        <div class="col-12">
                            <label for="message" class="form-label">Message <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="message" name="message" rows="6" required
                                      placeholder="D√©crivez votre projet, les produits qui vous int√©ressent, la quantit√© souhait√©e, vos d√©lais..."></textarea>
                            <div class="invalid-feedback">
                                Le message est requis.
                            </div>
                        </div>
                        
                        <div class="col-12">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="privacy" required>
                                <label class="form-check-label" for="privacy">
                                    J'accepte le <a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">traitement de mes donn√©es</a>
                                    <span class="text-danger">*</span>
                                </label>
                                <div class="invalid-feedback">
                                    Vous devez accepter le traitement des donn√©es.
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-12">
                            <button type="submit" class="btn btn-primary btn-lg w-100" id="submit-btn">
                                <i class="fas fa-paper-plane me-2"></i>
                                <span id="btn-text">Envoyer le message</span>
                                <span id="btn-loader" class="d-none">
                                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                                    Envoi en cours...
                                </span>
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Infos de contact (droite/petite) -->
                <div class="col-lg-4">
                    <div class="h-100">
                        <h3 class="fw-bold mb-4 text-center text-accent">Nos coordonn√©es</h3>
                        <div class="row g-4">
                            <div class="col-12">
                                <div class="icon-box p-3 bg-white rounded shadow-sm text-center">
                                    <i class="fas fa-envelope fa-2x text-accent mb-3"></i>
                                    <h4 class="fw-bold mb-2">Email</h4>
                                    <p class="mb-0 text-dark">contact@lescadeauxdenico.fr</p>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="icon-box p-3 bg-white rounded shadow-sm text-center">
                                    <i class="fas fa-comments fa-2x text-accent mb-3"></i>
                                    <h4 class="fw-bold mb-2">R√©ponse</h4>
                                    <p class="mb-0 text-dark">Sous 48h maximum</p>
                                    <p class="text-secondary">M√™me le week-end !</p>
                                </div>
                            </div>
                        </div>
                        <!-- CTA retour catalogue -->
                        <div class="text-center mt-4">
                            <a href="catalog.html" class="btn btn-outline-primary btn-lg px-4">
                                <i class="fas fa-arrow-left me-2"></i>
                                Retour au catalogue
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Modal RGPD (exemple) -->
    <div class="modal fade" id="privacyModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Politique de confidentialit√©</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="section-white p-4">
                    <p>Vos donn√©es sont utilis√©es uniquement pour r√©pondre √† votre demande et ne sont pas conserv√©es au-del√† de 1 an.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer dynamique -->
    <div id="footer-container"></div>
    
    <!-- Scripts JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
    <script src="assets/js/includeTemplates.js" defer></script>
    <script src="assets/js/main.js" defer></script>
    
    <script>
        // Gestion du formulaire Web3Forms
        (function () {
            'use strict'
            
            const form = document.getElementById('contact-form');
            const submitBtn = document.getElementById('submit-btn');
            const btnText = document.getElementById('btn-text');
            const btnLoader = document.getElementById('btn-loader');
            const successMsg = document.getElementById('success-message');
            const errorMsg = document.getElementById('error-message');
            
            form.addEventListener('submit', async function(event) {
                event.preventDefault();
                event.stopPropagation();
                
                // Validation Bootstrap
                if (!form.checkValidity()) {
                    form.classList.add('was-validated');
                    return;
                }
                
                // D√©sactiver le bouton et afficher le loader
                submitBtn.disabled = true;
                btnText.classList.add('d-none');
                btnLoader.classList.remove('d-none');
                
                // Masquer les anciens messages
                successMsg.classList.add('d-none');
                errorMsg.classList.add('d-none');
                
                // R√©cup√©rer les donn√©es du formulaire
                const formData = new FormData(form);
                
                try {
                    // Envoyer √† Web3Forms
                    const response = await fetch('https://api.web3forms.com/submit', {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        // Succ√®s !
                        successMsg.classList.remove('d-none');
                        form.reset();
                        form.classList.remove('was-validated');
                        
                        // Scroll vers le message de succ√®s
                        successMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    } else {
                        // Erreur de l'API
                        errorMsg.classList.remove('d-none');
                        console.error('Erreur Web3Forms:', data);
                    }
                } catch (error) {
                    // Erreur r√©seau
                    errorMsg.classList.remove('d-none');
                    console.error('Erreur r√©seau:', error);
                }
                
                // R√©activer le bouton
                submitBtn.disabled = false;
                btnText.classList.remove('d-none');
                btnLoader.classList.add('d-none');
            });
        })();
    </script>
</body>
</html>